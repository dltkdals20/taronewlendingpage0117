# ì¬ê³  0ê°œ â†’ 10ë¶„ í›„ 2ê°œ ë³µêµ¬ êµ¬í˜„ ì™„ë£Œ

## âœ… êµ¬í˜„ ì™„ë£Œ ì‚¬í•­

### 1. Supabase í…Œì´ë¸” ìˆ˜ì •
- `supabase_add_sold_out_at.sql`: `sold_out_at` í•„ë“œ ì¶”ê°€

### 2. Supabase í•¨ìˆ˜ ì¶”ê°€
- `set_sold_out_at()`: ì¬ê³ ê°€ 0ì´ ëœ ì‹œì  ê¸°ë¡
- `get_sold_out_at()`: `sold_out_at` ì¡°íšŒ
- `reset_application_count()` ìˆ˜ì •: í¬ë¡  ì‹¤í–‰ ì‹œ `sold_out_at`ë„ ì´ˆê¸°í™”

### 3. í”„ë¡ íŠ¸ì—”ë“œ ë¡œì§
- `timeBasedStock.ts`: `sold_out_at`ì´ ìˆê³  10ë¶„ ê²½ê³¼ ì‹œ 2ê°œ ë°˜í™˜
- `StockDisplay.tsx`: `sold_out_at` ì¡°íšŒ ë° 10ë¶„ ì²´í¬ ë¡œì§
- `ApplicationModal.tsx`: ì¬ê³ ê°€ 0ì´ ë˜ë©´ `sold_out_at` ê¸°ë¡

---

## ğŸ”„ ë™ì‘ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤: ì¬ê³ ê°€ 0ì´ ë˜ë©´

1. **ì¬ê³ ê°€ 0ì´ ë˜ëŠ” ìˆœê°„**
   - ì‚¬ìš©ìê°€ ì‹ ì²­ ì™„ë£Œ
   - `increment_application_count()` í˜¸ì¶œ
   - ê³„ì‚° ê²°ê³¼ ì¬ê³  = 0
   - `set_sold_out_at()` í˜¸ì¶œ â†’ í˜„ì¬ ì‹œê°„ ê¸°ë¡

2. **0ê°œ ìœ ì§€ (10ë¶„ ë¯¸ë§Œ)**
   - í™”ë©´: 0ê°œ í‘œì‹œ
   - `sold_out_at`ì´ ìˆì§€ë§Œ 10ë¶„ ë¯¸ê³¼
   - ì‹ ì²­ íšŸìˆ˜ëŠ” ê³„ì† ì¦ê°€ ê°€ëŠ¥

3. **10ë¶„ ê²½ê³¼ í›„**
   - `timeBasedStock()` í•¨ìˆ˜ê°€ `sold_out_at` í™•ì¸
   - 10ë¶„ ê²½ê³¼ ê°ì§€ â†’ 2ê°œ ë°˜í™˜
   - í™”ë©´: 2ê°œë¡œ ë³µêµ¬
   - ì‹ ì²­ íšŸìˆ˜ëŠ” ë¬´ì‹œí•˜ê³  2ê°œ ê³ ì •

4. **ìƒˆë²½ 5ì‹œ í¬ë¡  ì‹¤í–‰**
   - `reset_application_count()` í˜¸ì¶œ
   - ì‹ ì²­ íšŸìˆ˜ = 0
   - `sold_out_at` = NULL (ì´ˆê¸°í™”)
   - ë‹¤ìŒë‚ ë¶€í„° ì •ìƒ ì‹œê°„ëŒ€ë³„ ê³„ì‚° ì¬ê°œ

---

## ğŸ“‹ Supabase ì‹¤í–‰ ìˆœì„œ

1. `supabase_add_sold_out_at.sql` ì‹¤í–‰ (í•„ë“œ ì¶”ê°€)
2. `supabase_functions_v2.sql` ì‹¤í–‰ (í•¨ìˆ˜ ì¶”ê°€/ìˆ˜ì •)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ì¬ê³  0 ë§Œë“¤ê¸°
```sql
-- ì‹ ì²­ íšŸìˆ˜ë¥¼ ì‹œê°„ëŒ€ë³„ ê³„ì‚°ê°’ë§Œí¼ ì¦ê°€
SELECT increment_application_count(); -- ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰
```

### 2. sold_out_at ê¸°ë¡ í™•ì¸
```sql
SELECT sold_out_at FROM taro_selltime_management ORDER BY created_at DESC LIMIT 1;
```

### 3. 10ë¶„ í›„ í™•ì¸
- ë¸Œë¼ìš°ì €ì—ì„œ í™”ë©´ ì¬ê³ ê°€ 2ê°œë¡œ ë³µêµ¬ë˜ì—ˆëŠ”ì§€ í™•ì¸
- ì½˜ì†” ë¡œê·¸ í™•ì¸

### 4. í¬ë¡  ë¦¬ì…‹ í™•ì¸
- Railway í¬ë¡  ì‹¤í–‰
- `sold_out_at`ì´ NULLë¡œ ì´ˆê¸°í™”ë˜ì—ˆëŠ”ì§€ í™•ì¸
